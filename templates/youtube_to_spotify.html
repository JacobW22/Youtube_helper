{% load static %}
{% load widget_tweaks %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Youtube helper</title>
    
    <!-- Imports start -->
    <link href="{% static 'bootstrap/bootstrap.min.css' %}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/overall.css' %}">  
    <link rel="stylesheet" href="{% static 'css/simple_pages.css' %}">


    <script src="https://kit.fontawesome.com/5cd37e3dba.js" crossorigin="anonymous"></script>
    <script src="{% static 'bootstrap/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'vendor/jquery/jquery-3.2.1.min.js' %}"></script>


    <link rel="icon" type="image/png" href="{% static 'images/icons/favicon.ico' %}"/>
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
    <!-- Imports end -->
</head>
<body>
    
<!-- Navbar start -->
{% url 'youtube_to_spotify' as the_url %}
{% include "navbar.html" with sites_context=sites_context active_site_name="From Youtube to Spotify" active_site_url=the_url %}
<!-- Navbar end -->   

<!-- Main container start -->
<div class="d-flex justify-content-center main-container px-4 flex-column">
    <div class="container-fluid d-flex flex-column align-items-center gap-3 p-0" id="main_form" >


        <!-- Go back section start-->
            <div class="mx-auto go_back_container">
                <a class="text-light highlight_link go_back fs-5" href="{% url 'main_page' %}">
                    <i class="fa-solid fa-arrow-left"></i>&nbsp; Main Page
                </a>
            </div>
        <!-- Go back section end-->
    
            {% if not_auth %}

            <form method="post" class="container-fluid d-flex flex-column align-items-center gap-3 p-0" id="main_form" >
                {% csrf_token %}

                <span class="text-light fs-1 text-center"><i class="fa-brands fa-spotify"></i></span>
                <span class="pointing-to-mail text-light fs-1 text-center">Transfer Youtube playlist to Spotify</span>
                <i class="fa-solid fa-chevron-down text-light fs-3"></i>

                <button type="submit" class="d-flex align-items-center sp_login gap-3 animate mt-2">
                    <span class="text-light fs-1 text-center"><i class="fa-brands fa-spotify" style="color: #1DB954;"></i></span>
                    Login with Spotify
                </button>
            
            </form>

            {% else %}
        
            <form method="post" class="container-fluid d-flex flex-column align-items-center zoom gap-3 p-0" id="main_form" >
                {% csrf_token %}

                <span class="text-light fs-1 text-center"><i class="fa-brands fa-spotify"></i></span>
                <span class="pointing-to-mail text-light fs-2 text-center">Transfer playlist to Spotify</span>
                <span class="pointing-to-mail text-muted fs-5 text-center">Playlist url:</span>
                {{ form.url|add_class:"form-control"|attr:"placeholder:https://www.youtube.com/playlist?list=PLAYLIST_ID"|attr:"required"}}
                <button type="submit" class="btn btn-dark btn-lg animate mt-3">Transfer</button>
            
            </form>

            {% endif %}
        
    </div>
</div>  
<!-- Main container end -->



<!-- Toasts container start-->
<div class="toast-container bottom-0 start-50 translate-middle-x ">
    {% for message in messages %}
    <div class="toast fade text-center text-white border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false"> 
      <div class="toast-body">
          {{ message }}
      </div>
      <button type="button" class="btn-close ms-auto fs-6 mb-2 toast_dismiss" aria-label="Close"></button>
    </div>
    {% endfor %}
  </div>


<div class="toast-container bottom-0 start-50 translate-middle-x mb-5 ">
    {% for field,errors in form.errors.items %}
        {% for error in errors %}
          <div class="toast text-center text-white border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false"> 
              <div class="toast-body">
                {{ error }}
              </div>
            <button type="button" class="btn-close ms-auto fs-6 mb-2 toast_dismiss" aria-label="Close"></button>
          </div>
        {% endfor %}
    {% endfor %}
</div>
<!-- Toasts container end -->	

<script src="{% static 'js/main.js' %}" type="text/javascript"></script>
</body>
</html>