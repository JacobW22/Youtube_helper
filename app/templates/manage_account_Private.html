{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Youtube helper</title>

    
       <!-- Imports start -->
       <link href="{% static 'bootstrap/bootstrap.min.css' %}" rel="stylesheet">
       <link rel="stylesheet" href="{% static 'css/overall.css' %}">  
       <link rel="stylesheet" href="{% static 'css/sidebar.css' %}">  
       <link rel="stylesheet" href="{% static 'css/template_manage_account_Private.css' %}">
   
   
       <script src="https://kit.fontawesome.com/5cd37e3dba.js" crossorigin="anonymous"></script>
       <script src="{% static 'bootstrap/bootstrap.bundle.min.js' %}"></script>
       <script src="{% static 'vendor/jquery/jquery-3.2.1.min.js' %}"></script>
   
   
       <link rel="icon" type="image/png" href="{% static 'images/icons/favicon.ico' %}"/>
       <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
       <!-- Imports end -->
   </head>

</head>
<body>
    

<!-- Navbar start -->
{% url 'manage_account' as the_url %}
{% include "navbar.html" with sites_context=sites_context active_site_name="Manage account" active_site_url=the_url %}
<!-- Navbar end -->


  
<!-- Main container start -->
<div class="d-flex main-container flex-column flex-md-row">

  <!-- Sidebar start -->
  {% include "manage_account_sidebar.html" with active="Private" %}
  <!-- Sidebar end -->


   <section class="main_section col-lg-10 ">
    <div class="d-flex flex-column text-center align-items-center p-5 mt-5 gap-5">

      <span class="text-center text-light mx-auto fs-1">Private settings</span>
      
      
      <span class="text-center text-muted mx-auto fs-3">Api Authorization Token</span>

      {% if api_token %}
      <div class="d-flex flex-column flex-lg-row token_container align-items-center gap-5 gap-lg-0">
        <input class="form-control api_token text-center fs-3" id="token" value="{{ api_token }}"type="password" disabled/>
        <span class="d-none d-lg-inline-block copy_to_clipboard_icon" data-bs-toggle="tooltip" data-bs-placement="top" href="javascript:void(0);" onclick="copy_to_clipboard()" title="Copy to clipboard"><i class="fa-solid fa-copy text-light"></i></span>
        <span class="d-lg-none btn btn-lg copy_to_clipboard" data-bs-toggle="tooltip" data-bs-placement="top" href="javascript:void(0);" onclick="copy_to_clipboard()" title="Copy to clipboard">Copy &nbsp;<i class="fa-solid fa-copy"></i></span>
        <a class="btn btn-lg input_submit" id="revealButton" href="javascript:void(0);" onclick="RevealToken()">Reveal Api Token</a>
      </div>
      {% else %}
        <form method="POST">
          {% csrf_token %}
          <button type="submit" class="btn btn-lg">Generate Api Token</button>
        </form>
      {% endif %}
    </div>
   </section>

</div>
<!-- Main container end -->




<!-- Toasts container start -->	
<div class="toast-container bottom-0 start-50 translate-middle-x ">
  {% for message in messages %}
  <div class="toast fade text-center text-white border-0" role="alert" aria-live="assertive" aria-atomic="true" data-bs-animation="true" data-bs-autohide="false"> 
    <div class="toast-body">
        <i class="fa-regular fa-hand-peace"></i>&nbsp; {{ message }}
    </div>
    <button type="button" class="btn-close ms-auto fs-6 mb-2 toast_dismiss" aria-label="Close"></button>
  </div>
  {% endfor %}
</div>
<!-- Toasts container end -->	



<script src="{% static 'js/main.js' %}" type="text/javascript"></script>
<script type="text/javascript">

$(document).ready(function(){
  $('[data-bs-toggle="tooltip"]').tooltip();   
});


function RevealToken() {
  var token_form = document.getElementById("token");
  var revealButton = document.getElementById("revealButton");

  if (token_form.getAttribute("type") == "password") {
    token_form.setAttribute("type", "text");
    revealButton.innerHTML = "Hide Api Token";
  }
  else {
    token_form.setAttribute("type", "password");
    revealButton.innerHTML = "Reveal Api Token";
  }
}


function copy_to_clipboard() {
  var copyText = document.getElementById("token");

  navigator.clipboard.writeText(copyText.value);
  
  $('[data-bs-toggle="tooltip"]').attr('title', 'Copied!');

  $('[data-bs-toggle="tooltip"]').each(function( index ) {
    var tooltip = bootstrap.Tooltip.getInstance($(this));
    tooltip.setContent({'.tooltip-inner': 'Copied!'});
  })
}


$('[data-bs-toggle="tooltip"]').mouseout(function(){
  $('[data-bs-toggle="tooltip"]').each(function( index ) {
    var tooltip = bootstrap.Tooltip.getInstance($(this));
    tooltip.setContent({'.tooltip-inner': 'Copy to clipboard'});
  })
});

</script>
</body>
</html>